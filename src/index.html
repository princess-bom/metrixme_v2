<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
    <title>Matrix Me - AI 유형 진단 터미널</title>
    <meta name="description" content="해커 터미널 스타일의 AI 활용 유형 진단 웹사이트">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Matrix Me - AI 유형 진단">
    <meta property="og:description" content="당신의 AI 활용 유형을 해커 터미널에서 진단해보세요!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://matrixme.app">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Matrix Me - AI 유형 진단">
    <meta name="twitter:description" content="당신의 AI 활용 유형을 해커 터미널에서 진단해보세요!">
    
    <!-- Keywords -->
    <meta name="keywords" content="AI 테스트, AI 성향 테스트, AI MBTI, 인공지능 테스트, AI 활용 유형, AI 성격 진단, Matrix Me">
    
    <!-- hreflang 태그 -->
    <link rel="alternate" hreflang="ko" href="https://matrixme.app/">
    <link rel="alternate" hreflang="en" href="https://matrixme.app/en/">
    <link rel="alternate" hreflang="x-default" href="https://matrixme.app/en/">
    
    <!-- JSON-LD 구조화 데이터 -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Matrix Me",
      "description": "AI 활용 유형 진단 테스트 - 16가지 AI 성향을 진단하는 재미있는 성격 테스트",
      "url": "https://matrixme.app",
      "applicationCategory": "LifestyleApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      },
      "creator": {
        "@type": "Organization",
        "name": "Matrix Me"
      },
      "inLanguage": ["ko", "en"]
    }
    </script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Matrix Me">
    
    
    <link rel="stylesheet" href="assets/css/terminal.css">
    <link rel="stylesheet" href="assets/css/mobile.css">
    <link rel="stylesheet" href="assets/css/accessibility.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#terminal" class="skip-link">퀴즈로 건너뛰기</a>
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="terminal-controls">
                <span class="control red"></span>
                <span class="control yellow"></span>
                <span class="control green"></span>
            </div>
            <div class="terminal-title">
                <span class="title-part1">MATRIX ME</span>
                <span class="title-separator"> - </span>
                <span class="title-part2">DNA Scanner Active</span>
            </div>
            <div class="terminal-header-buttons">
                <button class="terminal-color-toggle" id="main-color-toggle" onclick="window.ColorManager && window.ColorManager.toggleColor()">
                    C
                </button>
                <button class="terminal-language-toggle" id="main-language-toggle">
                    EN
                </button>
            </div>
        </div>
        
        <div class="terminal-content" id="terminal">
            <div class="boot-sequence">
                <div class="boot-line">Matrix Me Terminal v2.1.0</div>
                <div class="boot-line">Copyright (c) 2025 Matrix Me Project</div>
                <div class="boot-line">All rights reserved.</div>
                <div class="boot-line separator-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
                <div class="boot-line"></div>
                <div class="boot-line" id="main-loading-text">AI DNA 스캔 시스템 초기화 중...</div>
                <div class="boot-line" id="main-progress-line">［<span id="main-loading-progress">░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░</span>］ <span id="main-progress-percent">0</span>%</div>
                <div class="boot-line"></div>
                <div class="boot-line" id="main-completion-text" style="display: none;">시스템 준비 완료.</div>
                <div class="boot-line"></div>
                <div class="logo-container">
                    <img src="assets/images/logo.png" alt="Matrix Me Logo" class="main-logo">
                </div>
                <div class="boot-line"></div>
                <div class="boot-line" id="description-line1">당신의 AI 활용 유형을 16가지 중에서 정확히 진단합니다.</div>
                <div class="boot-line" id="description-line2">20개의 질문을 통해 당신의 AI DNA를 분석하세요.</div>
                <div class="boot-line"></div>
                <div class="boot-line" id="language-selection-text">언어 선택 / Language Selection:</div>
                <div class="boot-line"></div>
                <div class="language-options">
                    <div class="option keyboard-focus touchable" data-lang="ko" tabindex="0" role="button" aria-label="한국어로 진단 시작">
                        <span class="option-key">[1]</span>
                        <span class="option-text" id="korean-option-text">한국어로 진단 시작 (Korean)</span>
                    </div>
                    <div class="option keyboard-focus touchable" data-lang="en" tabindex="0" role="button" aria-label="Start Diagnosis in English">
                        <span class="option-key">[2]</span>
                        <span class="option-text" id="english-option-text">Start Diagnosis in English</span>
                    </div>
                </div>
                <div class="boot-line"></div>
                <div class="input-line">
                    <div class="terminal-prompt-section">
                        <span class="prompt">root@matrix-me:~$ </span>
                        <span class="input-text" id="input-text"></span>
                        <span class="cursor">_</span>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <!-- 새로운 컴포넌트 시스템 -->
    <link rel="stylesheet" href="assets/css/design-system.css">
    <script src="assets/js/color-manager.js"></script>
    <script src="assets/js/language-manager.js"></script>
    <script src="assets/js/terminal-header.js"></script>
    
    <!-- 기존 모듈들 -->
    <script type="module" src="assets/js/performance.js"></script>
    <!-- 개발 중 서비스 워커 임시 비활성화 -->
    <!-- <script type="module" src="assets/js/sw-manager.js"></script> -->
    <script type="module" src="assets/js/terminal.js"></script>
    <script type="module" src="assets/js/typing.js"></script>
    <script type="module" src="assets/js/responsive-separator.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            // 인라인 컴포넌트는 새로운 모듈 시스템으로 대체됨
            
            // 인라인 LanguageManager도 새로운 모듈 시스템으로 대체됨

            const terminal = new TerminalEngine(document.getElementById('terminal'));
            terminal.initialize();
            
            // 먼저 이벤트 리스너 등록 (DOM이 준비된 상태에서)
            document.getElementById('main-color-toggle').addEventListener('click', () => {
                console.log('Color toggle clicked!'); // 디버깅용
                window.ColorManager.toggleColor();
            });
            
            // 새로운 컴포넌트 시스템 초기화
            setTimeout(() => {
                if (window.ColorManager) {
                    window.ColorManager.init();
                    console.log('ColorManager initialized'); // 디버깅용
                } else {
                    console.error('ColorManager not found');
                }
                
                if (window.LanguageManager) {
                    window.LanguageManager.init();
                    window.LanguageManager.autoBindEvents();
                }
            }, 100);
            
            // 메인 로딩 애니메이션 실행
            await animateMainLoading();
            
            // 언어 선택 처리
            document.addEventListener('click', (e) => {
                const option = e.target.closest('.option');
                if (option) {
                    const lang = option.dataset.lang;
                    selectLanguage(lang);
                }
            });
            
            // 키보드 이벤트 처리
            document.addEventListener('keydown', (e) => {
                const key = e.key;
                if (key === '1') {
                    selectLanguage('ko');
                } else if (key === '2') {
                    selectLanguage('en');
                } else if (key === 'c' || key === 'C') {
                    window.ColorManager.toggleColor();
                }
            });
            
            async function selectLanguage(lang) {
                const inputText = document.getElementById('input-text');
                
                // 선택 표시
                inputText.textContent = lang === 'ko' ? '1' : '2';
                
                await sleep(500);
                
                // 로딩 표시
                inputText.textContent = lang === 'ko' ? '한국어 모드 로딩...' : 'Loading English mode...';
                
                await sleep(1000);
                
                // 해당 언어의 퀴즈 페이지로 이동
                if (lang === 'ko') {
                    window.location.href = 'ko/quiz/';
                } else if (lang === 'en') {
                    window.location.href = 'en/quiz/';
                }
            }
            
            async function animateMainLoading() {
                const progressElement = document.getElementById('main-loading-progress');
                const percentElement = document.getElementById('main-progress-percent');
                const completionText = document.getElementById('main-completion-text');
                
                const steps = [
                    { progress: '░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░', percent: 0, delay: 0 },
                    { progress: '██████░░░░░░░░░░░░░░░░░░░░░░░░░░░', percent: 20, delay: 500 },
                    { progress: '█████████████░░░░░░░░░░░░░░░░░░░░', percent: 40, delay: 1000 },
                    { progress: '███████████████████░░░░░░░░░░░░░░', percent: 60, delay: 1500 },
                    { progress: '██████████████████████████░░░░░░░', percent: 80, delay: 2000 },
                    { progress: '█████████████████████████████████', percent: 100, delay: 2500 }
                ];
                
                for (const step of steps) {
                    await sleep(step.delay === 0 ? 100 : 500);
                    progressElement.textContent = step.progress;
                    percentElement.textContent = step.percent;
                }
                
                // 100% 완료 후 0.5초 뒤에 완료 메시지 표시
                await sleep(500);
                completionText.style.display = 'block';
                
                // 추가 0.5초 대기
                await sleep(500);
            }
            
            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        });
        
        // Service Worker는 sw-manager.js에서 자동으로 처리됩니다
    </script>
</body>
</html>