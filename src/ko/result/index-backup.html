<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Me - ì§„ë‹¨ ê²°ê³¼</title>
    <meta name="description" content="ë‹¹ì‹ ì˜ AI í™œìš© ìœ í˜• ì§„ë‹¨ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”!">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Matrix Me - AI ìœ í˜• ì§„ë‹¨ ê²°ê³¼">
    <meta property="og:description" content="ë‚˜ì˜ AI í™œìš© ìœ í˜•ì´ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://matrixme.app/ko/result/">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Matrix Me - AI ìœ í˜• ì§„ë‹¨ ê²°ê³¼">
    <meta name="twitter:description" content="ë‚˜ì˜ AI í™œìš© ìœ í˜•ì´ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤!">
    
    <!-- Keywords -->
    <meta name="keywords" content="AI í…ŒìŠ¤íŠ¸ ê²°ê³¼, AI ì„±í–¥ ì§„ë‹¨ ê²°ê³¼, AI ìœ í˜•, ì¡°ì¢…ì™•, ì–¼ë¦¬ë²„ë“œ, ì™„ì „ì²´">
    
    <!-- hreflang íƒœê·¸ -->
    <link rel="alternate" hreflang="ko" href="https://matrixme.app/ko/result/">
    <link rel="alternate" hreflang="en" href="https://matrixme.app/en/result/">
    <link rel="alternate" hreflang="x-default" href="https://matrixme.app/en/result/">
    
    <!-- JSON-LD êµ¬ì¡°í™” ë°ì´í„° -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Quiz",
      "name": "Matrix Me AI í™œìš© ìœ í˜• ì§„ë‹¨ ê²°ê³¼",
      "description": "ë‹¹ì‹ ì˜ AI í™œìš© ìœ í˜• ì§„ë‹¨ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš” - 16ê°€ì§€ ì„±í–¥ ì¤‘ í•˜ë‚˜",
      "inLanguage": "ko",
      "about": {
        "@type": "Thing",
        "name": "AI í™œìš© ìœ í˜• ê²°ê³¼",
        "description": "ê°œì¸ì˜ AI ë„êµ¬ ì‚¬ìš© ì„±í–¥ê³¼ íŠ¹ì„± ë¶„ì„ ê²°ê³¼"
      },
      "potentialAction": {
        "@type": "ShareAction",
        "name": "ê²°ê³¼ ê³µìœ í•˜ê¸°"
      }
    }
    </script>
    
    <!-- Critical CSS inline to prevent FOUC -->
    <style>
        html, body {
            margin: 0;
            padding: 0;
            background: #000000 !important;
            color: #00FF00 !important;
            font-family: 'Monaco', 'Menlo', 'Courier New', 'D2Coding', monospace;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: -1;
        }
    </style>
    
    <link rel="stylesheet" href="../../assets/css/terminal.css">
    <link rel="stylesheet" href="../../assets/css/mobile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="terminal-controls">
                <span class="control red"></span>
                <span class="control yellow"></span>
                <span class="control green"></span>
            </div>
            <div class="terminal-title">
                <span class="title-part1">Matrix Me ê²°ê³¼ í„°ë¯¸ë„</span>
                <span class="title-separator"> </span>
                <span class="title-part2">v2.1.0</span>
            </div>
            <div class="terminal-header-buttons">
                <button class="terminal-color-toggle" id="ko-result-color-toggle">
                    â– 
                </button>
            </div>
        </div>
        
        <div class="terminal-content" id="terminal">
            <!-- ë¡œë”© í™”ë©´ -->
            <div id="loading-screen">
                <div class="boot-line">AI DNA ë¶„ì„ ê²°ê³¼ ë¡œë”© ì¤‘...</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line">ë°ì´í„° ë³µí˜¸í™” ì¤‘...</div>
                <div class="boot-line">ìœ í˜• ë¶„ì„ ì™„ë£Œ...</div>
                <div class="boot-line">ê²°ê³¼ í™”ë©´ ì¤€ë¹„ ì¤‘...</div>
                <div class="boot-line"></div>
                <div class="loading">
                    <div class="cursor">_</div>
                </div>
            </div>

            <!-- ê²°ê³¼ í‘œì‹œ í™”ë©´ -->
            <div id="result-screen" style="display: none;">
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line neon-strong">ğŸ‰ AI DNA ë¶„ì„ ì™„ë£Œ! ğŸ‰</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line">â–¶ ë‹¹ì‹ ì˜ AI í™œìš© ìœ í˜•:</div>
                <div class="boot-line"></div>
                <div class="result-type-header">
                    <div class="boot-line neon-strong" id="type-name">ë¶„ì„ ì¤‘...</div>
                    <div class="boot-line text-secondary" id="type-english">Analyzing...</div>
                </div>
                <div class="boot-line"></div>
                
                <!-- íƒ€ì… ì‹¬ë³¼ ì˜ì—­ -->
                <div class="result-symbol" id="type-symbol">
                    <!-- íƒ€ì… ì‹¬ë³¼ì´ ë™ì ìœ¼ë¡œ ì‚½ì…ë©ë‹ˆë‹¤ -->
                </div>
                <div class="boot-line"></div>
                
                <!-- ê²°ê³¼ ì„¤ëª… -->
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line">ğŸ“Š ìƒì„¸ ë¶„ì„ ê²°ê³¼:</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line" id="type-description">ì„¤ëª…ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <div class="boot-line"></div>
                <div class="boot-line">ğŸ’¯ ë‹¹ì‹ ì˜ ì ìˆ˜: <span id="user-score" class="neon-text">0</span>ì </div>
                <div class="boot-line">ğŸ¯ ì •í™•ë„: <span id="accuracy" class="neon-text">95</span>%</div>
                <div class="boot-line"></div>
                
                <!-- í†µê³„ ì •ë³´ -->
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line">ğŸ“ˆ ì „ì²´ ìœ í˜• ë¶„í¬:</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line">ğŸ† ì¸ê¸° TOP 3 ìœ í˜•:</div>
                <div class="boot-line">1ìœ„: ì™„ì „ì²´ (28.4%)</div>
                <div class="boot-line">2ìœ„: ì•Œì§œë°°ê¸° (18.7%)</div>
                <div class="boot-line">3ìœ„: ì–¼ë¦¬ë²„ë“œ (15.2%)</div>
                <div class="boot-line"></div>
                <div class="boot-line">ğŸ”¥ ë‹¹ì‹ ê³¼ ê°™ì€ ìœ í˜•: <span id="same-type-percent" class="neon-text">12.3</span>%</div>
                <div class="boot-line">â­ í¬ê·€ë„: <span id="rarity-level" class="neon-text">ì¼ë°˜</span></div>
                <div class="boot-line"></div>
                
                <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line">ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="quiz-options">
                    <div class="quiz-option" data-action="share">
                        <span class="option-letter">S</span>
                        <span class="option-content">SNSì— ê³µìœ í•˜ê¸°</span>
                    </div>
                    <div class="quiz-option" data-action="retry">
                        <span class="option-letter">R</span>
                        <span class="option-content">ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°</span>
                    </div>
                    <div class="quiz-option" data-action="all-types">
                        <span class="option-letter">A</span>
                        <span class="option-content">ì „ì²´ ìœ í˜• ë³´ê¸°</span>
                    </div>
                    <div class="quiz-option" data-action="home">
                        <span class="option-letter">H</span>
                        <span class="option-content">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
                    </div>
                </div>
                <div class="boot-line"></div>
                <div class="input-line">
                    <span class="prompt">root@matrix-me:~$ </span>
                    <span class="input-text" id="result-input"></span>
                    <span class="cursor">_</span>
                </div>
            </div>

            <!-- ê³µìœ  í™”ë©´ -->
            <div id="share-screen" style="display: none;">
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line neon-strong">ğŸš€ ê²°ê³¼ ê³µìœ í•˜ê¸°</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line">ì¹œêµ¬ë“¤ì—ê²Œ ë‹¹ì‹ ì˜ AI ìœ í˜•ì„ ì•Œë ¤ì£¼ì„¸ìš”!</div>
                <div class="boot-line"></div>
                <div class="boot-line">ğŸ“± ê³µìœ  ì˜µì…˜:</div>
                <div class="boot-line"></div>
                <div class="quiz-options">
                    <div class="quiz-option" data-action="share-twitter">
                        <span class="option-letter">T</span>
                        <span class="option-content">Twitterì— ê³µìœ </span>
                    </div>
                    <div class="quiz-option" data-action="share-facebook">
                        <span class="option-letter">F</span>
                        <span class="option-content">Facebookì— ê³µìœ </span>
                    </div>
                    <div class="quiz-option" data-action="share-kakaotalk">
                        <span class="option-letter">K</span>
                        <span class="option-content">ì¹´ì¹´ì˜¤í†¡ì— ê³µìœ </span>
                    </div>
                    <div class="quiz-option" data-action="copy-link">
                        <span class="option-letter">C</span>
                        <span class="option-content">ë§í¬ ë³µì‚¬</span>
                    </div>
                    <div class="quiz-option" data-action="back-result">
                        <span class="option-letter">B</span>
                        <span class="option-content">ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</span>
                    </div>
                </div>
                <div class="boot-line"></div>
                <div class="boot-line">ê³µìœ  URL:</div>
                <div class="boot-line text-secondary" id="share-url">https://matrixme.vercel.app/ko/result/...</div>
                <div class="boot-line"></div>
                <div class="input-line">
                    <span class="prompt">root@matrix-me:~$ </span>
                    <span class="input-text" id="share-input"></span>
                    <span class="cursor">_</span>
                </div>
            </div>

            <!-- ì „ì²´ ìœ í˜• ë³´ê¸° í™”ë©´ -->
            <div id="all-types-screen" style="display: none;">
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line neon-strong">ğŸ¯ ì „ì²´ 16ê°€ì§€ AI ìœ í˜•</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line">Matrix Meì—ì„œ ì§„ë‹¨ ê°€ëŠ¥í•œ ëª¨ë“  ìœ í˜•ë“¤:</div>
                <div class="boot-line"></div>
                <div id="all-types-list">
                    <!-- ì „ì²´ ìœ í˜• ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì‚½ì…ë©ë‹ˆë‹¤ -->
                </div>
                <div class="boot-line"></div>
                <div class="quiz-options">
                    <div class="quiz-option" data-action="back-result">
                        <span class="option-letter">B</span>
                        <span class="option-content">ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</span>
                    </div>
                </div>
                <div class="boot-line"></div>
                <div class="input-line">
                    <span class="prompt">root@matrix-me:~$ </span>
                    <span class="input-text" id="types-input"></span>
                    <span class="cursor">_</span>
                </div>
            </div>

            <!-- ì—ëŸ¬ í™”ë©´ -->
            <div id="error-screen" style="display: none;">
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line text-error neon-strong">ğŸ’¥ ê²°ê³¼ ë¡œë”© ì˜¤ë¥˜</div>
                <div class="boot-line separator-line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                <div class="boot-line"></div>
                <div class="boot-line text-error">ì˜¤ë¥˜: <span id="error-message">ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span></div>
                <div class="boot-line"></div>
                <div class="boot-line">ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:</div>
                <div class="boot-line"></div>
                <div class="quiz-options">
                    <div class="quiz-option" data-action="retry-quiz">
                        <span class="option-letter">R</span>
                        <span class="option-content">í€´ì¦ˆ ë‹¤ì‹œ í•˜ê¸°</span>
                    </div>
                    <div class="quiz-option" data-action="home">
                        <span class="option-letter">H</span>
                        <span class="option-content">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
                    </div>
                </div>
                <div class="boot-line"></div>
                <div class="input-line">
                    <span class="prompt">root@matrix-me:~$ </span>
                    <span class="input-text" id="error-input"></span>
                    <span class="cursor">_</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="../../assets/js/sw-manager.js"></script>
    <script type="module" src="../../assets/js/terminal.js"></script>
    <script type="module" src="../../assets/js/typing.js"></script>
    <script type="module" src="../../assets/js/quiz.js"></script>
    <script type="module" src="../../assets/js/responsive-separator.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ì»¬ëŸ¬ í…Œë§ˆ ê´€ë¦¬ ê°ì²´
            const ColorManager = {
                themes: [
                    { name: 'ë¯¼íŠ¸ ê·¸ë¦°', color: '#00CC88' },
                    { name: 'ì‹¤ë²„ í™”ì´íŠ¸', color: '#D0D0D0' },
                    { name: 'ì•°ë²„ ì˜¤ë Œì§€', color: '#FF8C00' },
                    { name: 'ë„¤ì˜¨ í•‘í¬', color: '#FF0080' },
                    { name: 'ì•„ì´ìŠ¤ ë¸”ë£¨', color: '#00AAFF' }
                ],
                currentIndex: 0,
                
                init() {
                    this.applyColor(this.themes[0].color);
                },
                
                toggleColor() {
                    this.currentIndex = (this.currentIndex + 1) % this.themes.length;
                    const currentTheme = this.themes[this.currentIndex];
                    this.applyColor(currentTheme.color);
                },
                
                applyColor(color) {
                    // RGB ë³€í™˜ í•¨ìˆ˜
                    const hexToRgb = (hex) => {
                        const r = parseInt(hex.slice(1, 3), 16);
                        const g = parseInt(hex.slice(3, 5), 16);
                        const b = parseInt(hex.slice(5, 7), 16);
                        return `${r}, ${g}, ${b}`;
                    };
                    
                    const rgbColor = hexToRgb(color);
                    
                    // CSS ë³€ìˆ˜ ì—…ë°ì´íŠ¸
                    document.documentElement.style.setProperty('--text-primary', color);
                    document.documentElement.style.setProperty('--text-success', color);
                    document.documentElement.style.setProperty('--text-secondary', color);
                    document.documentElement.style.setProperty('--text-primary-rgb', rgbColor);
                    
                    // í„°ë¯¸ë„ ì»¨í…Œì´ë„ˆ ë°°ê²½ ë„¤ì˜¨ íš¨ê³¼ ì—…ë°ì´íŠ¸
                    const terminalContainer = document.querySelector('.terminal-container');
                    if (terminalContainer) {
                        terminalContainer.style.boxShadow = `
                            0 0 20px rgba(${rgbColor}, 0.3),
                            0 0 40px rgba(${rgbColor}, 0.1),
                            0 0 80px rgba(${rgbColor}, 0.05)
                        `;
                    }
                    
                    // ì»¬ëŸ¬ í† ê¸€ ë²„íŠ¼ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
                    const colorToggles = document.querySelectorAll('.terminal-color-toggle');
                    colorToggles.forEach(toggle => {
                        toggle.style.color = color;
                        toggle.style.borderColor = color;
                        toggle.style.textShadow = `0 0 8px ${color}`;
                    });
                    
                    // ê²°ê³¼ í˜ì´ì§€ ì „ìš© ìš”ì†Œë“¤ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
                    const neonTexts = document.querySelectorAll('.neon-text, .neon-strong');
                    neonTexts.forEach(text => {
                        if (text) {
                            text.style.color = color;
                            text.style.textShadow = `0 0 5px ${color}, 0 0 10px ${color}, 0 0 15px ${color}, 0 0 20px ${color}`;
                        }
                    });
                }
            };
            
            const resultApp = new KoreanResultApp();
            resultApp.initialize();
            
            // ì»¬ëŸ¬ ë§¤ë‹ˆì € ì´ˆê¸°í™”
            ColorManager.init();
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìƒ‰ìƒ ìƒíƒœ ë³µì›
            const savedColorIndex = localStorage.getItem('matrixme-color-index');
            if (savedColorIndex !== null) {
                ColorManager.currentIndex = parseInt(savedColorIndex);
                ColorManager.applyColor(ColorManager.themes[ColorManager.currentIndex].color);
            }
            
            // ì»¬ëŸ¬ í† ê¸€ ë²„íŠ¼ ê¸°ëŠ¥
            document.getElementById('ko-result-color-toggle').addEventListener('click', () => {
                ColorManager.toggleColor();
                localStorage.setItem('matrixme-color-index', ColorManager.currentIndex);
            });
        });

        class KoreanResultApp {
            constructor() {
                this.quizEngine = new QuizEngine('ko');
                this.terminal = new TerminalEngine(document.getElementById('terminal'));
                this.currentScreen = 'loading';
                this.resultData = null;
                this.shareUrl = '';
                this.isProcessing = false;
            }

            async initialize() {
                try {
                    await this.showLoadingScreen();
                    await this.loadResultData();
                    await this.showResultScreen();
                } catch (error) {
                    console.error('Initialization error:', error);
                    this.showErrorScreen('ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            async showLoadingScreen() {
                this.currentScreen = 'loading';
                document.getElementById('loading-screen').style.display = 'block';
                await this.sleep(1500);
                
                // ë‹¤ë¥¸ í™”ë©´ ìˆ¨ê¸°ê¸°
                document.getElementById('result-screen').style.display = 'none';
                document.getElementById('share-screen').style.display = 'none';
                document.getElementById('all-types-screen').style.display = 'none';
                document.getElementById('error-screen').style.display = 'none';
            }

            async loadResultData() {
                // URL íŒŒë¼ë¯¸í„°ì—ì„œ ê²°ê³¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const urlParams = new URLSearchParams(window.location.search);
                const type = urlParams.get('type');
                const score = urlParams.get('score');
                
                if (!type) {
                    throw new Error('ê²°ê³¼ íƒ€ì…ì´ ì§€ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                }
                
                // í€´ì¦ˆ ë°ì´í„° ë¡œë“œ
                await this.quizEngine.loadQuizData();
                
                // ê²°ê³¼ ë°ì´í„° êµ¬ì„±
                const typeData = this.quizEngine.quizData.types[type];
                if (!typeData) {
                    throw new Error(`ìœ íš¨í•˜ì§€ ì•Šì€ íƒ€ì…: ${type}`);
                }
                
                this.resultData = {
                    type: type,
                    typeData: typeData,
                    score: parseInt(score) || 0
                };
                
                // ê³µìœ  URL ìƒì„±
                this.shareUrl = `${window.location.origin}/ko/result/?type=${type}&score=${score}`;
            }

            async showResultScreen() {
                this.currentScreen = 'result';
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('result-screen').style.display = 'block';
                
                // ê²°ê³¼ ë°ì´í„° í‘œì‹œ
                this.displayResultData();
                this.setupEventListeners();
            }

            displayResultData() {
                if (!this.resultData) return;
                
                const { type, typeData, score } = this.resultData;
                
                // íƒ€ì… ì •ë³´ í‘œì‹œ
                document.getElementById('type-name').textContent = typeData.name;
                document.getElementById('type-english').textContent = typeData.english || type;
                document.getElementById('type-description').textContent = typeData.description;
                document.getElementById('user-score').textContent = score;
                
                // íƒ€ì… ì‹¬ë³¼ í‘œì‹œ
                const typeSymbol = this.getTypeSymbol(type);
                const symbolContainer = document.getElementById('type-symbol');
                symbolContainer.innerHTML = `<div class="type-symbol-display" style="color: ${typeData.color}; font-size: 3em; text-align: center; margin: 20px 0;">${typeSymbol}</div>`;
                
                // í†µê³„ ì •ë³´ (ëª¨ì˜ ë°ì´í„°)
                const mockStats = this.generateMockStats(type);
                document.getElementById('same-type-percent').textContent = mockStats.percentage;
                document.getElementById('rarity-level').textContent = mockStats.rarity;
                
                // ê³µìœ  URL ì„¤ì •
                document.getElementById('share-url').textContent = this.shareUrl;
            }

            generateMockStats(type) {
                const stats = {
                    'ctrl': { percentage: '8.7', rarity: 'í¬ê·€' },
                    'beta': { percentage: '15.2', rarity: 'ì¼ë°˜' },
                    'core': { percentage: '12.4', rarity: 'ì¼ë°˜' },
                    'hide': { percentage: '3.8', rarity: 'ë§¤ìš° í¬ê·€' },
                    'pick': { percentage: '18.7', rarity: 'í”í•¨' },
                    'vibe': { percentage: '6.3', rarity: 'í¬ê·€' },
                    'flow': { percentage: '28.4', rarity: 'ë§¤ìš° í”í•¨' },
                    'sync': { percentage: '4.2', rarity: 'ë§¤ìš° í¬ê·€' },
                    'pure': { percentage: '9.8', rarity: 'í¬ê·€' },
                    'nova': { percentage: '11.6', rarity: 'ì¼ë°˜' },
                    'echo': { percentage: '7.9', rarity: 'í¬ê·€' },
                    'hype': { percentage: '13.2', rarity: 'ì¼ë°˜' },
                    'mesh': { percentage: '10.5', rarity: 'í¬ê·€' },
                    'sage': { percentage: '14.7', rarity: 'ì¼ë°˜' },
                    'scan': { percentage: '5.1', rarity: 'í¬ê·€' },
                    'base': { percentage: '2.9', rarity: 'ë§¤ìš° í¬ê·€' }
                };
                
                return stats[type] || { percentage: '10.0', rarity: 'ì¼ë°˜' };
            }

            getTypeSymbol(type) {
                const symbols = {
                    'controlfreak': 'â™”',
                    'earlybird': 'âš¡',
                    'traditionalist': 'ğŸ“',
                    'stealthexpert': 'ğŸ¤«',
                    'efficiencyking': 'ğŸ’',
                    'vibechecker': 'ğŸµ',
                    'aiaddict': 'ğŸš€',
                    'specialist': 'ğŸ”¨',
                    'anxietybot': 'ğŸ˜°',
                    'visionary': 'ğŸŒŸ',
                    'minimalist': 'â—½',
                    'evangelist': 'ğŸ”¥',
                    'bridgebuilder': 'ğŸ›¡ï¸',
                    'wisecounsel': 'ğŸ§™',
                    'detective': 'ğŸ”',
                    'scaredycat': 'ğŸ˜±'
                };
                return symbols[type] || 'ğŸ¤–';
            }

            showShareScreen() {
                this.currentScreen = 'share';
                document.getElementById('result-screen').style.display = 'none';
                document.getElementById('share-screen').style.display = 'block';
            }

            async showAllTypesScreen() {
                this.currentScreen = 'all-types';
                document.getElementById('result-screen').style.display = 'none';
                document.getElementById('all-types-screen').style.display = 'block';
                
                // ì „ì²´ ìœ í˜• ëª©ë¡ í‘œì‹œ
                await this.displayAllTypes();
            }

            async displayAllTypes() {
                const allTypesContainer = document.getElementById('all-types-list');
                allTypesContainer.innerHTML = '';
                
                const types = Object.keys(this.quizEngine.quizData.types);
                
                types.forEach((type, index) => {
                    const typeData = this.quizEngine.quizData.types[type];
                    const line = document.createElement('div');
                    line.className = 'boot-line';
                    line.innerHTML = `${(index + 1).toString().padStart(2, '0')}. <span class="type-${type}" style="color: ${typeData.color}">${typeData.name}</span> - ${typeData.description}`;
                    allTypesContainer.appendChild(line);
                });
            }

            showErrorScreen(message) {
                this.currentScreen = 'error';
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('result-screen').style.display = 'none';
                document.getElementById('share-screen').style.display = 'none';
                document.getElementById('all-types-screen').style.display = 'none';
                document.getElementById('error-screen').style.display = 'block';
                document.getElementById('error-message').textContent = message;
            }

            setupEventListeners() {
                // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
                document.addEventListener('keydown', (e) => {
                    if (this.isProcessing) return;
                    
                    const key = e.key.toLowerCase();
                    
                    if (this.currentScreen === 'result') {
                        if (key === 's') {
                            this.handleAction('share');
                        } else if (key === 'r') {
                            this.handleAction('retry');
                        } else if (key === 'a') {
                            this.handleAction('all-types');
                        } else if (key === 'h') {
                            this.handleAction('home');
                        }
                    } else if (this.currentScreen === 'share') {
                        if (key === 't') {
                            this.handleAction('share-twitter');
                        } else if (key === 'f') {
                            this.handleAction('share-facebook');
                        } else if (key === 'k') {
                            this.handleAction('share-kakaotalk');
                        } else if (key === 'c') {
                            this.handleAction('copy-link');
                        } else if (key === 'b') {
                            this.handleAction('back-result');
                        }
                    } else if (this.currentScreen === 'all-types') {
                        if (key === 'b') {
                            this.handleAction('back-result');
                        }
                    } else if (this.currentScreen === 'error') {
                        if (key === 'r') {
                            this.handleAction('retry-quiz');
                        } else if (key === 'h') {
                            this.handleAction('home');
                        }
                    }
                });

                // ë§ˆìš°ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸
                document.addEventListener('click', (e) => {
                    if (this.isProcessing) return;
                    
                    const option = e.target.closest('.quiz-option');
                    if (!option) return;
                    
                    const action = option.dataset.action;
                    if (action) {
                        this.handleAction(action);
                    }
                });
            }

            async handleAction(action) {
                if (this.isProcessing) return;
                this.isProcessing = true;
                
                const inputId = {
                    'result': 'result-input',
                    'share': 'share-input',
                    'all-types': 'types-input',
                    'error': 'error-input'
                }[this.currentScreen];
                
                const inputElement = document.getElementById(inputId);
                if (inputElement) {
                    inputElement.textContent = action;
                }
                
                try {
                    switch (action) {
                        case 'share':
                            await this.sleep(500);
                            this.showShareScreen();
                            break;
                        case 'retry':
                            await this.sleep(500);
                            window.location.href = '../quiz/';
                            break;
                        case 'all-types':
                            await this.sleep(500);
                            await this.showAllTypesScreen();
                            break;
                        case 'home':
                            await this.sleep(500);
                            window.location.href = '/';
                            break;
                        case 'share-twitter':
                            this.shareToTwitter();
                            break;
                        case 'share-facebook':
                            this.shareToFacebook();
                            break;
                        case 'share-kakaotalk':
                            this.shareToKakaoTalk();
                            break;
                        case 'copy-link':
                            await this.copyToClipboard();
                            break;
                        case 'back-result':
                            await this.sleep(500);
                            this.showResultScreen();
                            break;
                        case 'retry-quiz':
                            await this.sleep(500);
                            window.location.href = '../quiz/';
                            break;
                    }
                } catch (error) {
                    console.error('Action error:', error);
                }
                
                this.isProcessing = false;
            }

            shareToTwitter() {
                const text = `ë‚˜ì˜ AI í™œìš© ìœ í˜•: ${this.resultData.typeData.name}! Matrix Meì—ì„œ ë‹¹ì‹ ì˜ ìœ í˜•ë„ ì•Œì•„ë³´ì„¸ìš” ğŸš€`;
                const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(this.shareUrl)}`;
                window.open(url, '_blank');
            }

            shareToFacebook() {
                const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.shareUrl)}`;
                window.open(url, '_blank');
            }

            shareToKakaoTalk() {
                // ì¹´ì¹´ì˜¤í†¡ ê³µìœ  (ì‹¤ì œ êµ¬í˜„ì‹œ Kakao SDK í•„ìš”)
                alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤!');
            }

            async copyToClipboard() {
                try {
                    await navigator.clipboard.writeText(this.shareUrl);
                    document.getElementById('share-input').textContent = 'ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
                    await this.sleep(1000);
                    document.getElementById('share-input').textContent = '';
                } catch (error) {
                    console.error('Clipboard error:', error);
                    document.getElementById('share-input').textContent = 'ë³µì‚¬ ì‹¤íŒ¨';
                }
            }

            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }
    </script>
</body>
</html>