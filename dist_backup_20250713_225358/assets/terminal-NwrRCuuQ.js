class o{constructor(t){this.container=t,this.currentLine="",this.history=[],this.isTyping=!1,this.language="ko",this.initialized=!1}initialize(){this.initialized||(this.setupEventListeners(),this.showBootSequence(),this.initialized=!0)}setupEventListeners(){document.addEventListener("keydown",t=>{if(this.isTyping)return;const e=t.key.toLowerCase();e==="1"?this.selectLanguage("ko"):e==="2"&&this.selectLanguage("en"),["a","b","c","d","e"].includes(e)&&this.selectAnswer(e),e==="enter"&&this.handleEnter()}),document.addEventListener("click",t=>{if(t.target.closest(".option")){const n=t.target.closest(".option").dataset.lang;n&&this.selectLanguage(n)}if(t.target.closest(".quiz-option")){const n=t.target.closest(".quiz-option").dataset.letter;n&&this.selectAnswer(n)}})}async showBootSequence(){const t=document.querySelectorAll(".boot-line");for(let e=0;e<t.length;e++)await this.delay(200),t[e].style.opacity="0",t[e].style.transform="translateX(-10px)",t[e].style.transition="all 0.3s ease",await this.delay(50),t[e].style.opacity="1",t[e].style.transform="translateX(0)",t[e].classList.contains("ascii-art")&&await this.delay(800);this.startCursorBlink()}startCursorBlink(){const t=document.querySelector(".cursor");t&&(t.style.animation="blink 1s infinite")}async typeText(t,e,n=50){this.isTyping=!0;const s=e||document.createElement("div");s.textContent="";for(let i=0;i<t.length;i++)s.textContent+=t[i],await this.delay(n);return this.isTyping=!1,s}async selectLanguage(t){if(this.isTyping)return;this.language=t;const e=document.getElementById("input-text");document.querySelector(".cursor"),e.textContent=t==="ko"?"1":"2",await this.delay(500),e.textContent=t==="ko"?"한국어 모드 로딩...":"Loading English mode...",await this.delay(1e3),window.location.href=`${t}/quiz/`}async selectAnswer(t){if(this.isTyping)return;const e=document.getElementById("input-text");document.querySelectorAll(".quiz-option").forEach(s=>{s.classList.remove("selected"),s.dataset.letter===t.toLowerCase()&&s.classList.add("selected")}),e.textContent=t.toUpperCase(),await this.delay(500),this.processAnswer(t)}processAnswer(t){const e=new CustomEvent("answerSelected",{detail:{letter:t.toLowerCase()}});document.dispatchEvent(e)}handleEnter(){const t=document.querySelector(".quiz-option.selected");if(t){const e=t.dataset.letter;this.processAnswer(e)}}addLine(t,e=""){const n=document.createElement("div");return n.className=`boot-line ${e}`,n.textContent=t,this.container.appendChild(n),n}clear(){this.container.innerHTML=""}delay(t){return new Promise(e=>setTimeout(e,t))}updateProgress(t,e){const n=Math.round(t/e*100),s=document.querySelector(".progress-fill"),i=document.querySelector(".progress-text");s&&(s.style.width=`${n}%`),i&&(i.textContent=`${n}% (${t}/${e})`)}applyNeonEffect(t,e="normal"){const n=e==="strong"?"neon-strong":"neon-text";t.classList.add(n)}applyTypeColor(t,e){t.classList.add(`type-${e}`)}animateElement(t,e="fadeIn"){t.style.animation=`${e} 0.5s ease-in`}showLoading(t){const e=document.createElement("div");return e.className="loading",t.appendChild(e),e}createButton(t,e,n="terminal-button"){const s=document.createElement("button");return s.className=n,s.textContent=t,s.onclick=e,s}scrollToBottom(){this.container.scrollTop=this.container.scrollHeight}isMobile(){return window.innerWidth<=768}handleTouchEvents(){let t=0;this.container.addEventListener("touchstart",e=>{t=e.touches[0].clientY}),this.container.addEventListener("touchmove",e=>{const n=e.touches[0].clientY,s=t-n;this.container.scrollTop+=s,t=n})}showKeyboardGuide(){const t=this.addLine("키보드 단축키:","text-secondary");return this.addLine("1, 2: 언어 선택","text-muted"),this.addLine("A, B, C, D, E: 답변 선택","text-muted"),this.addLine("Enter: 확인","text-muted"),this.addLine("",""),t}showError(t){const e=this.addLine(`오류: ${t}`,"text-error");return this.applyNeonEffect(e,"strong"),e}showSuccess(t){const e=this.addLine(`✓ ${t}`,"text-success");return this.applyNeonEffect(e,"strong"),e}showWarning(t){const e=this.addLine(`⚠ ${t}`,"text-warning");return this.applyNeonEffect(e),e}enableDebug(){this.debug=!0,console.log("Terminal debug mode enabled")}log(t){this.debug&&console.log(`[Terminal] ${t}`)}}window.TerminalEngine=o;export{o as T};
